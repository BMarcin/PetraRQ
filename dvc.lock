schema: '2.0'
stages:
  split_dataset:
    cmd: python ./src/split_dataset.py
    deps:
    - path: ./data/in-header.tsv
      md5: 008cca9046bc8d74c8215a2883aa476d
      size: 7
    - path: ./data/out-header.tsv
      md5: 757889307369887028c89db5646b73de
      size: 7
    - path: ./data/parsed-pdfs.json
      md5: f57356c5feba6526f5a0e12cd2c5becf
      size: 1513810345
    - path: ./src/DatasetSplitter/DatasetSplitter.py
      md5: 4fbd8efb8d2c18b9e9dc86939c0d8240
      size: 2184
    - path: ./src/split_dataset.py
      md5: fb3c92dcb2a9865336a8e9c002647435
      size: 3646
    params:
      params.yaml:
        datasetsplit.dev: 0.1
        datasetsplit.test: 0.2
        datasetsplit.train: 0.7
    outs:
    - path: ./data/dev/expected.tsv
      md5: 5391538123caa438255b9bc85320a1ba
      size: 61303
    - path: ./data/dev/in.tsv
      md5: 0b412ccb9d699a7c3c7cafcccb49b2d1
      size: 159742659
    - path: ./data/test/expected.tsv
      md5: 5aa2eb7467c1ff713ab14f7d1ef5646c
      size: 131694
    - path: ./data/test/in.tsv
      md5: 122cbc0ca7f3348b57681e444943a338
      size: 293002155
    - path: ./data/train/expected.tsv
      md5: 091810eb6381bcdecd098ac8e1d7e27b
      size: 457301
    - path: ./data/train/in.tsv
      md5: 85fc4cb5761062504e5412ebb7b02803
      size: 1016531152
  rewrite_dataset_to_lm_texts:
    cmd: python ./src/rewrite_dataset.py
    deps:
    - path: ./data/dev/in.tsv
      md5: 0b412ccb9d699a7c3c7cafcccb49b2d1
      size: 159742659
    - path: ./data/test/in.tsv
      md5: 122cbc0ca7f3348b57681e444943a338
      size: 293002155
    - path: ./data/train/in.tsv
      md5: 85fc4cb5761062504e5412ebb7b02803
      size: 1016531152
    - path: ./src/DatasetRewriter/LanguageModelingRewriter.py
      md5: 5d13bfdc57a9585405851c795d7caf93
      size: 1956
    - path: ./src/rewrite_dataset.py
      md5: c9e7e62c9755dc97a0b874044226562a
      size: 1081
    outs:
    - path: ./data/dev/lm.txt
      md5: 5c8d925e2e8441d3d0a3e906553c76c1
      size: 162942254
    - path: ./data/test/lm.txt
      md5: 252febebedec3fa04869a7e685d65324
      size: 298319163
    - path: ./data/train/lm.txt
      md5: dcb961c85dc491aa295479169665554b
      size: 1027574174
  evaluate:
    cmd: python test.py
    deps:
    - path: todo.txt
      md5: c804a63f0a910503967f625d6c7c22e0
      size: 1217
    outs:
    - path: scores.json
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
