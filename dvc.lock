schema: '2.0'
stages:
  split_dataset:
    cmd: python ./src/split_dataset.py
    deps:
    - path: ./data/in-header.tsv
      md5: 691f892e65c64cefe6e4bfb1493a997a
      size: 24
    - path: ./data/out-header.tsv
      md5: dc6c1d3eecfe40d374314b5d56aa536d
      size: 14
    - path: ./data/parsed-pdfs.json
      md5: e9b60861734ddc93be6318db98c155e2
      size: 3407420087
    - path: ./src/DatasetSplitter/DatasetSplitter.py
      md5: 74decfd061dccc1e8e9f604ede9ea119
      size: 2315
    - path: ./src/split_dataset.py
      md5: 23feb175f5dfb8fbb9d606608b14e4e2
      size: 4295
    params:
      params.yaml:
        datasetsplit.dev: 0.05
        datasetsplit.sort_by: date
        datasetsplit.test: 0.1
        datasetsplit.train: 0.85
    outs:
    - path: ./data/dev/expected.tsv
      md5: 94a461358327759f88fbf677c94a6eab
      size: 94971
    - path: ./data/dev/in.tsv
      md5: dafa7c488580f29a63431ce149d6416d
      size: 239789657
    - path: ./data/test/expected.tsv
      md5: 0d4f77dc18622b68dc842ba4e90e2591
      size: 181433
    - path: ./data/test/in.tsv
      md5: 965f5c51903a86b4627d19a578eaa5b4
      size: 388966317
    - path: ./data/train/expected.tsv
      md5: 2dca998d29033d272be2b1269be3e343
      size: 1559312
    - path: ./data/train/in.tsv
      md5: a2d8dfd76ceed3e0278f714429cd1fd1
      size: 2621612493
  rewrite_dataset_to_lm_texts:
    cmd: python ./src/rewrite_dataset.py
    deps:
    - path: ./data/dev/in.tsv
      md5: dafa7c488580f29a63431ce149d6416d
      size: 239789657
    - path: ./data/test/in.tsv
      md5: 965f5c51903a86b4627d19a578eaa5b4
      size: 388966317
    - path: ./data/train/in.tsv
      md5: a2d8dfd76ceed3e0278f714429cd1fd1
      size: 2621612493
    - path: ./src/DatasetRewriter/LanguageModelingRewriter.py
      md5: da1e1d32ff54803854ca0fbb0b7054b4
      size: 1532
    - path: ./src/rewrite_dataset.py
      md5: 2feb4ef0cb9eaec8bf89af21690d4ffb
      size: 2006
    outs:
    - path: ./data/dev/lm.txt
      md5: 3ded16b3953922cceaa90923883a7147
      size: 215738076
      isexec: true
    - path: ./data/dev/processed.tsv
      md5: 3ded16b3953922cceaa90923883a7147
      size: 215738076
      isexec: true
    - path: ./data/test/lm.txt
      md5: 61ed2915525aa2acd50189a964ddc46a
      size: 348233057
      isexec: true
    - path: ./data/test/processed.tsv
      md5: 61ed2915525aa2acd50189a964ddc46a
      size: 348233057
      isexec: true
    - path: ./data/train/lm.txt
      md5: 5928e0910854642a694527f5d062f636
      size: 2391144197
      isexec: true
    - path: ./data/train/processed.tsv
      md5: 5928e0910854642a694527f5d062f636
      size: 2391144197
      isexec: true
  train_classifier:
    cmd: python ./src/train_xgboost.py
    deps:
    - path: ./data/dev/expected.tsv
      md5: 94a461358327759f88fbf677c94a6eab
      size: 94971
    - path: ./data/dev/processed.tsv
      md5: 3ded16b3953922cceaa90923883a7147
      size: 215738076
    - path: ./data/test/expected.tsv
      md5: 0d4f77dc18622b68dc842ba4e90e2591
      size: 181433
    - path: ./data/test/processed.tsv
      md5: 61ed2915525aa2acd50189a964ddc46a
      size: 348233057
    - path: ./data/train/expected.tsv
      md5: 2dca998d29033d272be2b1269be3e343
      size: 1559312
    - path: ./data/train/processed.tsv
      md5: 5928e0910854642a694527f5d062f636
      size: 2391144197
    - path: ./src/SKLearnDS/SKLearnDS.py
      md5: 4d1063b5067b067968114bd06b7eb8be
      size: 1268
    - path: ./src/train_xgboost.py
      md5: b85ee80c83ff138dc18d6f7065eebabf
      size: 6179
    params:
      params.yaml:
        xgboost.max_depth: 3
        xgboost.n_estimators: 300
        xgboost.outputs: probabilities
    outs:
    - path: ./data/dev/out.tsv
      md5: 4d55dd415e1ac32c735d925f04e72547
      size: 2416449
      isexec: true
    - path: ./data/test/out.tsv
      md5: eb8b4138ab3b3e090cb496f5e34f59ac
      size: 4835313
      isexec: true
    - path: ./models/xgboost/model.pkl
      md5: a465209fca01d3716e6a45d6a8884371
      size: 6951036
      isexec: true
    - path: scores_classification.json
      md5: 6f1bdd63d9985461b16425c82608be1c
      size: 139
